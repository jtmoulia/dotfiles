#+title: rc.elv (jtmoulia)
#+author: Thomas Moulia
#+email: jtmoulia@gmail.com

This is inspired by zzamboni's [[https://zzamboni.org/post/my-elvish-configuration-with-commentary/][literate elvish config]].

* Usage

TODO

* Implementation
:PROPERTIES:
:header-args:elvish: :tangle (file-name-sans-extension (buffer-file-name))
:header-args: :mkdirp yes :comments no
:END:

#+begin_src elvish :exports none
  # DO NOT EDIT THIS FILE DIRECTLY
  # This is a file generated from a literate programing source file.
  # You should make any changes there and regenerate it from Emacs org-mode
#+end_src

** Environment Vars

Prepend =$E:HOME/bin= to the list of executable search paths -- this is a great
place for user executables:

#+BEGIN_SRC elvish :exports none
  paths = [$E:HOME/bin $@paths]
#+END_SRC


Set up the default editor (=E:SHELL= is kept as-is because I don't =elvish= as
the default shell):

#+BEGIN_SRC elvish :exports none
  E:EDITOR = nvim
#+END_SRC

** Setup EPM

This config will use the elvish package manager (EPM) to install dependencies --
let's set it up:

#+BEGIN_SRC elvish :exports none
  use epm
#+END_SRC

** Theme

For completion use zzamboni's [[https://github.com/zzamboni/elvish-themes][chain]] theme:

#+BEGIN_SRC elvish :exports none
  epm:install &silent-if-installed github.com/zzamboni/elvish-themes
  use github.com/zzamboni/elvish-themes/chain
#+END_SRC

** Completions

For completion, zzamboni again provides [[https://zzamboni.org/post/using-and-writing-completions-in-elvish/][inspiration]]. Pull in existing completion
configurations:

#+BEGIN_SRC elvish :exports none
  epm:install &silent-if-installed github.com/zzamboni/elvish-completions
  use github.com/zzamboni/elvish-completions/ssh
  use github.com/zzamboni/elvish-completions/git
#+END_SRC

Um what does smart-matcher do?

#+BEGIN_SRC elvish :exports none
  epm:install &silent-if-installed github.com/xiaq/edit.elv
  use github.com/xiaq/edit.elv/smart-matcher
  smart-matcher:apply
#+END_SRC

** Helpers and Modules

Go/Elvish has a fine implementation of regular expressions in the [[https://elvish.io/ref/re.html][re]] module:

#+BEGIN_SRC elvish :exports none
  use re
#+END_SRC


The [[https://elvish.io/ref/bundled.html][readline-binding]] module provides some quality of life keybindings:

#+BEGIN_SRC elvish :exports none
  use readline-binding
#+END_SRC

Additional keybindings:

#+BEGIN_SRC elvish :exports none
  edit:insert:binding[Alt-Backspace] = $edit:kill-small-word-left~
  # edit:insert:binding[Alt-d] = $edit:kill-small-word-right~
#+END_SRC

The bash =!!= and =!$= helpers are awesome, so of course zzamboni has an [[https://github.com/zzamboni/elvish-modules/blob/master/bang-bang.org][implementation]]:

#+BEGIN_SRC elvish :exports none
  epm:install &silent-if-installed github.com/zzamboni/elvish-modules
  use github.com/zzamboni/elvish-modules/bang-bang
#+END_SRC

Here's a testing lab for modules:

#+BEGIN_SRC elvish :exports none
  use github.com/zzamboni/elvish-modules/long-running-notifications
  use github.com/zzamboni/elvish-modules/terminal-title
#+END_SRC

** Aliases

Pull in zzamboni's alias module and define some aliases:

#+BEGIN_SRC elvish :exports none
  use github.com/zzamboni/elvish-modules/alias
  # define the aliases
  alias:new ls e:ls --color=auto
  # export the aiases (should this be done later?)
  -exports- = (alias:export)
#+END_SRC
